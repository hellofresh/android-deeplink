language: android
android:
  components:
    # travis/android: https://docs.travis-ci.com/user/languages/android/
    - tools
    - platform-tools
    - tools
    # The BuildTools version used by the project
    - build-tools-28.0.3
    # The SDK version used to compile the project
    - android-28

before_cache:
  - rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
before_install:
  - yes | sdkmanager "platforms;android-28" "platform-tools" "tools"
cache:
  directories:
    - "$HOME/.gradle/caches/"
    - "$HOME/.gradle/wrapper/"
    - "$HOME/.android/build-cache"
before_script:
  - export VERSION_TO_BUILD="$TRAVIS_TAG"
  - export PATH="$ANDROID_HOMEtools/bin:$PATH"
script:
  - "./gradlew --stacktrace check --no-daemon"
after_success:
  - bash <(curl -s https://codecov.io/bash)
deploy:
  provider: releases
  api_key: "$GITHUB_OAUTH_TOKEN"
  file: deeplink/build/outputs/apk/android-deeplink-${VERSION_TO_BUILD}-release.aar
  skip_cleanup: true
  on:
    tags: true
env:
  global:
    - secure: QhaNLRhq5BzI5VpKIfwDuUUJOhAsqUnLwzLhzTWjD39YJwg4BAagRUbceKFUiT5JALdlVB9yPBdvDZHcqRxgtXFGSy0Yzr/Um8IwQ05ISwi4OcaOmI84y0KRPlcvMO6Gc5e+XY4SPYK/7PyIaVdLCZ/bi9hNb20Bc+h+0dmdz8/IdR+7p3e3zPI07aJJs3R8trCUvbRtmS3C32RBNGwQgWblDqTTaJQR9XtWRIQIG8n01Xf1WYnDMZrwYDbQ5wjYRtAViZl8txfVU6Syg96mt8/+cVc1ogXr0K05IhBl/uK8chSHsaNrvk52JKSsDI8SXYgjFyVkdP9kzYmtfRV9EcmnHIIFw8wAfhkceH1YPTH4qdqnUXrslJWgKQfEsp6xl6Dt25cyjvBNj3qxzl+htg7XT3qrPZsjH5OfeHzL3f+lzXZHpLwdCVIqdSGThqcQtXRpi+RYq97yRSo8t1NzHt3Y4xhALOAji3Rp4F1A4g9AsxYHBjFL8NfQCenhGI8Gk2JXi8E8+ba4W3c+upNrQD/Swdc1QtBRvmCz+so8BNaDaLYiQAm40cpcUN5qaLhcnSqFBYUtM1YJlyM4cvLByF8HEt4ybZ+/SxorER2rSaHRyF92/tx5bZbxrf6jMMgXCfSz0BPqiQqy8Q0md5iBMfK/jCScJIG6A4hSHjuTT9s=
    - secure: a9EYhfcgfPrAlRZ1WXPimtv58QEadgmbN8hGz8BtXMje27v2tAb5MRU4X7SAFK0vi8GHXR6IK7hvHnctROacvuKNGhX0YoDCLAOIWshACdan1mzHK4wC0alcNhPMLRfSvl7uGQ3s338VXomEGi+GObiER7rZ87cidJOilku3HQ3m304VoQLIYldZujXkeI20Q45/j0fpzi4nEIktg/vHMUeV6zrviS76dY7i771fsvjUB2hkpKhoVO6CZ5nbWgSd6n+jEqS2Kmwb9k7SfF5JUhP2+7xWqzRU9CWrP3SHKta1rhRGoaANhERnNWjUaVednpULbw/CUXZA19jHAS9cOSoUse3shzKICNacwcuJJWD1YWQCz1OUBNSMTxK2GzzTChk8w9YzvHLWMcpJ2UbGbafjYhgKyssjl/GoHjCwRM9w0Q3kagNH2+gpSQ7fIjgmevk6w6XTonPXl2mau4OAZEIj0fYwKuxUr8i2vnqjojwtEa+UpmuqF3ZcLGrg1w0igWNExx/D8bce69wFxXG1VPW3bdpuxORDbweDoMXQyxyMvsh0SSCk+MNiqUWZ/7iHCoakEM4rZZ1WjHPf998taj4B9ZE3oC5VkR+Lu1/moYCFMs5J9BW2v1c6pLfDBYiaaLY7jDvBKfCNOAqI9hbei+moUwY10YfP+mtqHjuuCVA=
    - secure: oAxiwOTR8C1UBZPjV8LSYP0il4u5DrEgd4gEJT6TS9E9jZk7pi4LxtS4G2X/cv6Bb4uS3j5IgYPakIRhn8O6WzPrJjoUqzJwWBukaX9LKQVu522TrWH7GtEkQBCfUWM0HAktf5m7FLezlm0nomzIw4TGZMJL8HfBvAUv48PVngam38pzKlbBIww/p5CqylDQ8anRBnm70EwA+bSblnfEIzWXxpUz/AX1er4McoSjQny20dhyu2AYWs7QKiCbh8x42l3JeU/GaSpo95+cPhOAXDFrzeeQKpNOZpp5gIi69VyBpYvfOapUEDOrqNs6F2NGoXNQ1zZN7MXAzIJxTcUI7OKSkaLu68lZTYBfuPha55uIfbIkini5pzNw8gjAJaPmpX54zS2s7Mxdrl3BCSOyDqFXndvobh7BCOd1hWMuME0fXQBlQu/u406RR8PP/7JNRh7zAB9HgHi218xWP6sOoXKT8EIkjS8E4rz9f4YC2Ismq29fyvRSKayAQMI2XykgDB/Xl91E6RE6f+Xty3ZRuYp9pohPBav1X2zQLkNP95KjsQ8W5DMdehOOC+WtbxXNDP0dTWuAbHdsOzBRka+M65TvTNj5bZ6CNa5D1qGmAFjRaqlYjwFIo6nnfLNhe2rqc3NtUMXZiQlCqAbeACSM0i22BxYfyfEuLoZGo0bVoaI=